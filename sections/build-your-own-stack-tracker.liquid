{% if template.name != 'cart' and section.settings.is_enabled %}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.1/dist/confetti.browser.min.js"></script>
<div id="mt-build-your-own-stack-tracker" v-cloak>
    <mt-build-your-own-stack-tracker inline-template>
         <transition name="fade">
            <div class="bfcm-progress-wrap cursor-pointer" v-if="initialized" @click="scrollInToView">
                <div id="conffeti-canvas"></div>
                <div class="text-sm sm:text-base bfcm-progress-text flex">
                    <span class="font-semibold uppercase mr-1">Progress:</span>
                    <div>
                        {% raw %}
                        <transition name="fade">
                                <span class="" v-if="itemCountNew < config.discountThreshold">Choose <span class="font-semibold">{{ buyMissingCount }}</span> or more items</span>
                                <span class="" v-if="readyForCheckout">Click the <span class="font-semibold"> CHECKOUT </span> button to finish the order üéâ</span>
                        </transition>
                        {% endraw %}
                    </div>
                </div>

                <div class="flex item-center text-sm sm:text-base justify-between">
                    <div class="text-sm md:text-base" ><span class="font-semibold" :class="{'text-accent' : !readyForCheckout}">{% raw %} {{ itemCountNew }}{% endraw %}</span>/<span class="text-sm">{% raw %}{{ config.discountThreshold }}{% endraw %}</span></div>
                    <div>üèÅ</div>
                </div>
                <div class="bfcm-progress-bar-wrap w-full">
                    {% raw %}
                        <div class="bfcm-progress-bar" :style="{width: progress}" :class="{'is-success' : readyForCheckout}"></div>
                    {% endraw %}
                </div>
            </div>
         </transition>
    </mt-build-your-own-stack-tracker>
</div>
{% endif %}
{% schema %}
{
    "name": "Build your own tracker",
    "class": "build-your-own-tracker",
    "settings": [
        {
          "type": "header",
          "content": "General Settings"
        },
        {
            "type": "checkbox",
            "id": "is_enabled",
            "label": "Enabled",
            "default": true
        }
    ]
}

{% endschema %}
